# تنظیمات اصلی
secret = "${SECRET_KEY}"  # یا از SECRET_KEY محیطی استفاده می‌کند
bind-to = "0.0.0.0:${PORT}"

# تنظیمات شبکه
[network]
timeout = "30s"
prefer-ip = "prefer-ipv6"
tcp-buffer = "64KB"

# ضد حملات تکرار
[antireplay]
max-size = "10MB"
window = "1h"

# لیست IP های مسدود شده
[ip-blocklist]
urls = [
    "https://www.spamhaus.org/drop/drop.txt",
    "https://www.spamhaus.org/drop/edrop.txt"
]
update-every = "6h"

# جلوگیری از تشخیص (FakeTLS)
[tls]
domain = "${RAILWAY_STATIC_URL}"
port = 443

# ارسال آمار
[stats]
[stats.statsd]
address = ""  # غیرفعال - اگر نیاز داشتید تنظیم کنید

[stats.prometheus]
enable = false

# ثبت رویدادها
[log]
level = "info"
json = false

# DNS امن
[dns]
type = "doh"
host = "cloudflare-dns.com"
port = 443
path = "/dns-query"

# تنظیمات SOCKS5 (برای زنجیره کردن پروکسی)
[proxy]
type = "none"  # "socks5" اگر نیاز به proxy chain داشتید
